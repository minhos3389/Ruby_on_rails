# link_to

- **scaffold**, 하나씩 만들어왔던 것들을 한번에 만들어주는 기능을 하는 친구?를 알아보자.

## view_helper(1)
Rails에서 View를 더 다루기 쉽게하기위해 제공하는 view_helper중에서<br> **link_to**라는 것에 대해서 알아보자.

### link_to
html에서의 a태그와 같은 역할.(경로를 이동시켜주는 역할)


### link_to 사용법
```<%=link_to '텍스트',URL %>```
- `'텍스트'` 부분이 이전 ```<a>텍스트</a>``` a태그로 이동하는 부분
- `'텍스트'`뒤에 `,` 를 하고 URL을 적어 주게 된다.

```Ruby
# index.html 파일 


# 기존 삭제 코드
<a href="/posts/destroy/<%=post.id%>">삭제</a>
# link_to를 사용해 삭제 기능 구현 
<%=link_to '삭제',"posts/destroy/#{post.id}" %>
```
- **주의할 점**: 루비 문법을 써야하는 상태에서 "문자열" 안에 문자가 아닌 변수를 넣으려면 `#{}`로 감싸줘야 한다.
- 여기서 주의해야할 게, 초록색 샵과 중괄호 안에 싸여진 코드는 루비 문법을 써야하는데 이미 <%%>를 쓴 상태에서 문자열 안에 루비 코드를 집어넣어야 하는 경우에 사용한다.  감싼 코드는 “”안에서만 유효. 그냥 따옴표 사이에서는 코드가 인식이 안 된다.

```Ruby
# route.rb에 as를 사용하여 route를 짧게 부르도록 설정할 수 있다.
get '/home/destroy/:post_id', to: 'posts#destroy', as: 'post_destroy'
```
```
레일즈에서는 이렇게 쓰는 URL도 좀 더 편리하게 쓸 수 있지 않을까 라는 생각에 route를 좀 더 쉽게 사용할 수 있는 법을 제공한다.
route에서 이 경로에 대한 이름을 as를 사용하여 설정할 수 있다. 
그리고 이렇게 설정한 이름 뒤에 path를 붙여서 우리는 link_to에서 사용할 수 있다. 
원래 우리가 넘겨주던 post_id라는 이름에 똑같이 post.id를 담아서 보내줄 수도 있다. 
이렇게 하면 좀 더 간편하게 route를 이용할 수 있다.

그리고 기본적인 속성은 똑같아서 a 태그 안에 우리가 button 같은걸 집어넣을 수 있었듯이 이 link_to 안에도 다른 태그를 집어넣을 수 있다.
```
- `rake routes`를 통해서 routes들 확인할 수 있었는데 6.0.0버전부터 `rails routes`를 사용한다.

- as:를 사용한 후의 index.html 파일 변화
```Ruby
# as로 설정된 post_destroy에 _path를 붙여 post_destroy_path로 작성.
# post_destroy_path는 URL경로를 의미한다. ('/posts/destroy/:post_id)
# 전송할 값이 하나인 경우엔 post_id: 적지 않고 post.id 만적어도 잘 전송해준다.
<%=link_to '삭제',post_destroy_path(post_id:post.id) %>
```

```Ruby
# routes.rb
get 'home/destroy/:post_id', to: 'home#destroy', as: 'post_destroy'
```

## index.html.erb 뷰 파일을 수정해보자.
`<%=link_to("[삭제]","/home/destroy/#{p.id}" )%>` 코드를 수정 <br>

- do end문을 사용한다.

link_to다음에 괄호 열고 문자열을 지우고, as로 설정한 post_destroy에 _path를 붙여 post_destroy_path (p.id)작성해준다.
`<%=link_to(post_destroy_path(post_id: p.id)) do%>`사이에 `button태그` 사용(button태그 사이에 삭제 작성) `<%end%>`로 닫아준다. <br>
삭제라고 적혀진 직사각형 버튼이 생성되게 된다.


```html
<a href="/posts/destroy/<%=post.id%>">
    <button>삭제</button>
</a>

<!-- 위의 코드를 link_to를 이용해서 아래로 변경 -->
<%=link_to post_destroy_path(post_id:post.id) do%>
    <button>삭제</button>
<%end%>
```

- 여태까지 4가지의 방법으로 배운 삭제기능들 깔끔하게 잘 수행된다.<br>`link_to` 를 사용하여 코드를 더 간결하게 사용할 수 있게 되었다.