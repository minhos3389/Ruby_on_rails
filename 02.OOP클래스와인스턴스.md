# OOP-클래스와 인스턴스

루비에서 제공하는 객체를 사용하지 않고 직접 클래스와 인스턴스를 생성할 수도 있다. 
#### 클래스 안에는 두 요소가 담긴다
- 변수와 함수 (클래스 안의 함수는 메소드라고 부르기도 한다.)

<BR>

- 문자열을 만들어주는 String 사용해 볼것.
- `rb`는 루비파일명 이를 사용하여 first.rb라는 파일명 만들어서 실습

```Ruby
# 다른 변수 
# 같은 메소드
# 다른 결과

# String Object 사용
# reverse는 문자열(string)을 역으로 정렬해주는 함수
word = String.new('insome')
puts word.reverse # -> emosni

word2 = String.new('nia')
puts word2.reverse  # -> ain
```

# 클래스를 만드는법
### 1.변수 
### 2.함수(메소드)

## initialize(초기화) 
- 필수적인것
- class를 만들면 가장 먼저 `initialize` 함수를 적어줘야 한다.
- initialize함수가 없으면 `인스턴스를 생성할 떄 넣은 정보`를 받아올 수 없다.
- 정보를 받아왔으면 메소드(함수)를 만들고, 그 안에 처음 만든 인스턴스의 정보를 넣어 실행할 수 있다.
- 문자열 안에 루비 코드를 삽입하려면 `#{}`안에 루비 변수를 넣어줘야 한다.

```ruby
class Person
    # 초기화 함수 작성
    def initialize(name)
        puts name
    end
end

dodo = Person.new("도도")
```

### 인스턴스 변수사용

```Ruby
class Person
    def initialize(name)
        puts name
    end

    # 변수를 문자열안에서 사용하려면 #{변수명} 사용
    def run
        puts "#{name}이(가) 달립니다!"
    end
end

person = Person.new("kiki")
person.run #-> 실행 안된다. 왜냐면 현재 name은 지역변수이기 때문이다.
# 지역변수는 함수 바깥으로 나가지 못한다. 
# 초기화를 통하여 인자를 받더라도 initialize의 영역 바깥으로 넘어가지 못하여 run이라는 메소드는 name의 존재를 모른다.
# 따라서 인스턴스 변수로 교체해줘야 한다.
```

- 변경 후

```Ruby
# @변수명을 사용하여 인스턴스 변수를 사용할 수 있다.
classs Person
    def initialize(name)
        @name = nmae
    end

    def run
        puts "#{@name}가(이) 달립니다."
    end

    def drink
        puts "#{@name}가(이) 물을 마십니다."
    end
end

# Person클래스를 사용해서 인스턴스를 만들 수 있다.
# 재사용 가능(불필요한 중복사용제거)
dodo = Person.new("도도")
dodo.run
dodo.drink

kiki = Person.new("키키")
kiki.run 
kiki.drink

# ruby first.rb 수행 할 시 나오는 결과물

# 도도가(이) 달립니다.
# 도도가(이) 물을 마십니다.

# 키키가(이) 달립니다.
# 키키가(이) 물을 마십니다.
```

### 클래스 변수(@@)
- 클래스 전체 차원에서 사용하고 싶을 경우 사용
- `클래스 안` 전체에서 사용 가능한 변수 인스턴스 변수의 범위를 포함한다. (메소드 밖에서도 사용 가능)


```Ruby
class Person
    @@people_count = 0

    def initialize(name)
        @name = nmae
        @@people_count +=1
    end

    def run
        puts "#{@name}가(이) 달립니다"
    end

    def drink
        puts "#{@name}가(이) 물을 마십니다"
    end

    # 클래스 변수를 사용하기 위해서는 함수 앞에 self를 붙여준다.
    def self.number_of_instances
        puts "현재 총 #{@@people_count}명의 사람이 생성되었습니다."
    end
end

dodo = Person.new("도도")
dodo.run
dodo.drink

Person.number_of_instances

bow = Person.new("바우")
bow.run
bow.drink
Person.number_of_instances
```