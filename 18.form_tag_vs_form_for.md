# form_tag vs form_for

## form_tag
: 범용적인 입력 양식(o) / 특정한 모델 편집 (x) <br>
ex) 검색 키워드, 조건

## form_for
: 범용적인 입력 양식(x) / 특정한 모델 편집(o) <br>
ex) 게시물 생성, 수정


form_tag는 모델을 새로 생성하거나 변경하는 경우가 아닌 경우인 검색,조건 등에 사용하고 model이랑 연관되어 있는 경우 form_for 를 이용

- form_tag를 form_for처럼 사용할 수 있으나 차이점에 유의하자
(TMI: form_tag가 조금 더 쉽다.)

### form_helper의 공통점
#### 1) 자동으로 CSRF 방지 코드 삽입
#### 2) 기본 메소드는 POST

### form_tag를 사용한 create기능 구현

```Ruby
<%=form_tag("/home/create", method: "post" ) do %>
    <!-- name, value 지정 -->
    # post_title이 name, value는 nil
    제목: <%=text_field_tag 'post_title', nil %> <br>
    # post_content가 name, value는 nil
    내용: <%=text_area_tag 'post_content', nil %><br>
    <%=submit_tag '제출' %>
<%end%>
```
```
기본틀은 form태그 do ~ end 사이에 input tag를 넣는 형식이다.
폼 태그 뒤에 괄호를 하고 url과 method를 적어주면 된다. 
기본 method가 POST라 따로 적어주지 않아도 된다.

그리고 우리가 input tag에서 사용했던 name과 value를 차례로 적어주면 된다. .글을 새로 쓰는 페이지에서는 저번에도 따로 어떤 내용을 미리 삽입해준 적이 없기 때문에 그냥 nil로 처리한다.
그냥 안 적어도 된다.
```
```ruby
# new.html.erb파일
<%=form_tag(posts_path, method: "post") do%>
    # csrf 방지 태그는 자동으로 생성되므로 생성하지마라  
    # form_tag를 사용하면 input 다음에 _tag를 붙이게 될것. 
    # 괄호는 원래 생략해서 사용가능. text_field_tag 'post_title' nil 
    # value도 없는 경우에는 생략가능 

    <%=label_tag 'post_title', '제목'%>
    <%=text_field_tag 'post_title' %><br>
    <%=label_tag 'post_content', '내용' %>
    <%=text_area_tag 'post_content'%><br>
    <%=submit_tag '작성' %>
<%end%>
```
### form_tag를 사용한 update기능 구현

- routes.rb파일을 수정해준다.
```Ruby
# routes.rb 파일
Rails.application.routes.draw do
  root "home#index"

  get 'home/index'
  # get 'home/index' => 'home#index'
  # url들어오면 get방식으로 컨트롤러의 액션수행해라.
  # 'home/index' url로 이동하면 home 컨트롤러의 index액션으로 이동한 후 index.html.erb를 보여준다.
  get 'home/new'

  # form_tag url 바꾸기 위해서 as: 'posts'로 지정
  post 'home/create', as: 'posts'
  
  # get 'home/destroy' => 'home#destroy'
  # /post_id 는 주소가 문자 그대로 /post_id로 이동
  # /:post_id 는 /destroy/1, /destroy/2와 같이 게시물의 id를 post_id 변수에 저장.
  # get 'home/destroy/:post_id' => 'home#destroy'
  #  이 route를 post_destroy라는 이름으로 짧게 부르도록 하자는 것.
  # 이 url을 post_destroy라고 부르고 뒤에 path를 붙여서 link_to에 사용하도록 하자.
  get '/home/destroy/:post_id' => 'home#destroy', as: 'post_destroy'


  get'home/edit/:post_id' => 'home#edit'

  # put/patch는 수정 기능을 담당 
  # 차이는 있으나 일단 patch 사용하겠다.
  patch 'home/update/:post_id' => 'home#update', as: 'post'
end
```
- form_tag의 method default는 post이므로 patch로 변경할 것.

```Ruby
# edit.html.erb파일
<%=form_tag(post_path, method: "patch") do %>
    <%=label_tag 'post_title', '제목' %>
    <%=text_field_tag 'post_title', @post.title %><br> 

    <%=label_tag 'post_content', '내용' %>
    <%=text_area_tag 'post_content', @post.content %><br>
    <%=submit_tag '제출' %>
<%end%>
```
