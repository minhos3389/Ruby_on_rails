# MVC-VC 구현2

-config/routes.rb

### (1.어떤 주문) 이 들어오면 (2.이런) 방식으로 (3.저런) 동작을 해라 라는 것을 따로 명시해주는 것을 **라우팅** 즉, 경로를 설정한다고 한다.

```Ruby
# routes.rb 에 경로 정보 설정
Rails.application.routes.draw do
    root 'home#index'
    #get '/' => 'home#index'

    #2  #1         #3
    get '/attack', to: 'home#attack'
    get '/defense', to: 'home#defense'
end
```

여기서 ```get```은 url요청방식 ```'/attack'```은 사용자가 요청하는 url(사이트 주소/attack) 이고 ```'home#attack'```은 요청된 url을 처리할 컨트롤러#액션


```Ruby
Rails.application.routes.draw do
    root "home#index"
    # 링크로 이동하면 해당하는 이름.html.erb파일이 보이게 된다.
    get '/attack', to: 'home#attack'
    get '/defense', to: 'home#defense'
end
```

### html form 태그를 이용한 정보추가주문
```html
<!-- action.html.erb파일 내용이다. -->
<form action="/attack">
    누가?<br>
    <!-- 누가공격했는지 입력한값1 -->
    <input type="text" name="userA">
    누그를 공격해?<br>
    <!-- 누가 공격받았는 입력한값2 -->
    <input type="text" name="userB">
    <br>
    <input type="submit" value="제출">
</form>
```
```/attack```이라는 url로 정보를 보내면 해당 url을 처리하는 액션(attack)에서 userA, userB도 처리해라. <br>
usrA, userB에 관한 정보는 날아가서 params라는 우리가 보낸 정보 보따리에 들어가서 전송이 되게 된다.<br>
attack뷰에서 params를 통해서 확인해보자

```html
<!-- attack.html.erb파일 -->
<h1>공격했습니다!</h1>
<%=params%>
<!-- {"userA"=>"입력한값1, "userB"=>"입력한값2","controller"=>"home", "action"=>"attack"} 확인할 수 있다.-->
```

erb파일에서 루비코드를 삽입하기 위해서는  <br>
```<%=루비코드%>``` 이렇게 작성.

- MVC구조에서 컨트롤러는 데이터의 가공과 처리를 담당한다.
params 보따리를 풀어서 원하는 정보로 가공하고 처리하도록 한다.
```Ruby
# controller의 home_controller 수정

# attack액션에 from,to인스턴스변수 생성
# 그안에서 params 정보중에 userA, userB를 각각 인스턴스 변수인 @from,@to에 저장
def attack
    @from = parmas[:userA]
    @to = params[:userB]
end

def defense
    @from = parmas[:userA]
    @to = parmas[:userB]
```
```html
<!-- attack.html.erb파일 -->
<h1><%=@from%>가 <%=@to%>를 공격했습니다!</h1>
<a href="/">뒤로 가기</a>

<!-- defense.html.erb파일 -->
<h1><%=from%>가 <%=@to%>를 방어했습니다!</h1>
<a href="/">뒤로 가기 </a>
```
